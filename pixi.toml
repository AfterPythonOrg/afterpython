[workspace]
authors = ["softwareentrepreneer <softwareentrepreneer+afterpython@gmail.com>"]
channels = ["conda-forge"]
name = "afterpython"
platforms = ["osx-arm64", "linux-64"]
version = "0.0.1.dev2"

[tasks]
add = { cmd = "uv add {{ lib }} && pixi add --pypi {{ lib }}", args = ["lib"] }
remove = { cmd = "uv remove {{ lib }} && pixi remove --pypi {{ lib }}", args = ["lib"] }

[tasks.test-all]
depends-on = [
  { task = "test", environment = "py311" },
  { task = "test", environment = "py312" },
  { task = "test", environment = "py313" },
  { task = "test", environment = "py314" },
]

[dependencies]
python = ">=3.11"
uv = ">=0.9.7"
# NOTE: install mystmd via pixi instead of uv to avoid the restrictive version constraints in pypi package `mystmd`
# since pixi doesn't support override-dependencies
mystmd = ">=1.6.4"

[pypi-dependencies]
click = ">=8.1.8"
trogon = ">=0.6.0"
pyproject-metadata = ">=0.9.1"
pdoc = ">=16.0.0"
ruff = ">=0.14.4"
pre-commit = ">=4.3.0"

[environments]
default = ["py311", "optional"]
py311 = ["py311", "test", "optional"]
py312 = ["py312", "test", "optional"]
py313 = ["py313", "test", "optional"]
py314 = ["py314", "test", "optional"]

[feature.optional.pypi-dependencies]
marimo = { version = ">=0.17.7", extras = ["recommended"] }
notebook = ">=7.4.7"
jupytext = ">=1.18.1"

[feature.test.pypi-dependencies]
pytest = ">=8.4.2"
pytest-cov = ">=7.0.0"
pytest-mock = ">=3.15.1"
pytest-xdist = ">=3.8.0"
[feature.test.tasks]
test = "pytest"

[feature.py311.dependencies]
python = "3.11.*"

[feature.py312.dependencies]
python = "3.12.*"

[feature.py313.dependencies]
python = "3.13.*"

[feature.py314.dependencies]
python = "3.14.*"
